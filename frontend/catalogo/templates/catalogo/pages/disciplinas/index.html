{% extends "catalogo/base.html" %}
{% block title %}Disciplinas{% endblock %}

{% block content %}
    <section class="animate-fadeIn mt-10 shadow-[0_0_4px_1px_rgba(255,255,255,.3)] p-10 rounded-sm flex flex-col gap-3 relative">
        
        <div class="flex items-center justify-between">
            <h1 class="text-5xl mb-6 font-semibold">Disciplinas</h1>
            <p class="mb-2">Total de disciplinas: {{count}}</p>
        </div>
        <input class="            
            px-4
            py-2
            border-1
            border-neutral-50
            rounded-sm
            w-full
            mb-4
        " 
        type="text"
        placeholder="Buscar disciplina..."
        >
        {% if count == 0 %}
            <p class="text-center text-neutral-300">Não há disciplinas cadastradas no momento.</p>
        {% endif %}
        {% if error %}
            <p style="color:red;">Erro: {{ error }}</p>
        {% endif %}
        <div class="grid grid-cols-1 justify-center items-center gap-5">
            {% for disciplina in results %} 
                <div class="shadow-[0_0_4px_1px_rgba(255,255,255,.3)] p-10 rounded-sm relative">
                    <span class="absolute top-4 right-4 font-medium">{{disciplina.carga_horaria}}h</span>
                    <div class="flex gap-2">
                        <div class="mb-4 [&>span]:px-2 [&>span]:py-1 [&>span]:rounded-full [&>span]:text-white [&>span]:font-medium [&>span]:text-[10px]">
                            {% if disciplina.ativo %}<span class="bg-green-600">Ativo</span> {% else %}<span class="bg-gray-500">Inativo</span>{% endif %}
                        </div>
                        <div class="mb-4 [&>span]:px-2 [&>span]:py-1 [&>span]:rounded-full [&>span]:text-white [&>span]:font-medium [&>span]:text-[10px]">
                            <span class="bg-blue-600">{{disciplina.codigo}}</span>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <h2>{{disciplina.nome}} - ( {{disciplina.sigla}} )</h2>
                    </div>
                    <div class="mt-3">
                        <p class="text-neutral-400">{{disciplina.curso.nome}} - ({{disciplina.curso.sigla}}) - {{disciplina.curso.carga_horaria_total}}h</p>
                    </div>
                    <div class="flex gap-4 w-full">
                        <a href="{%url 'catalogo:disciplinas-editar' disciplina.id %}" class="mt-4 py-2 px-6 bg-indigo-700 text-neutral-50 rounded-sm hover:bg-indigo-500 cursor-pointer transition-all duration-300 text-lg">Editar</a>
                            {% if disciplina.ativo %}
                                <form action="{% url 'catalogo:disciplinas-inativar' disciplina.id %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="mt-4 py-2 px-6 bg-gray-700 text-neutral-50 rounded-sm hover:bg-gray-500 cursor-pointer transition-all duration-300 text-lg">Inativar</button>
                                </form>
                            {% else %}
                                <form action="{% url 'catalogo:disciplinas-ativar' disciplina.id %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="mt-4 py-2 px-6 bg-green-700 text-neutral-50 rounded-sm hover:bg-green-500 cursor-pointer transition-all duration-300 text-lg">Ativar</button>
                                </form>
                            
                            {% endif %}                    
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>
{% endblock %}