{% extends "catalogo/base.html" %}
{% block title %}Cursos{% endblock %}

{% block content %}
    <section class="animate-fadeIn mt-10 shadow-[0_0_4px_1px_rgba(255,255,255,.3)] p-10 rounded-sm flex flex-col gap-3 relative">
        
        <div class="flex items-center justify-between">
            <h1 class="text-5xl mb-6 font-semibold">Cursos</h1>
            <p class="mb-2">Total de cursos: {{count}}</p>
        </div>
        <input class="            
            px-4
            py-2
            border-1
            border-neutral-50
            rounded-sm
            w-full
            mb-4
        " 
        type="text"
        placeholder="Buscar curso..."
        >
        {% if count == 0 %}
                <p class="text-center text-neutral-300">Não há cursos cadastrados no momento.</p>
        {% endif %}
        {% if error %}
            <p style="color:red;">Erro: {{ error }}</p>
        {% endif %}
        <div class="grid grid-cols-1 justify-center items-center gap-5">
            {% for curso in results %} 
                <div class="shadow-[0_0_4px_1px_rgba(255,255,255,.3)] p-10 rounded-sm relative">
                    <span class="absolute top-4 right-4 font-medium">{{curso.carga_horaria_total}}h</span>
                        <div class="flex gap-2">
                            <div class="mb-4 [&>span]:px-2 [&>span]:py-1 [&>span]:rounded-full [&>span]:!text-white [&>span]:font-medium [&>span]:text-[10px]">
                                {% if curso.ativo %}<span class="bg-green-600">Ativo</span> {% else %}<span class="bg-gray-500">Inativo</span>{% endif %}
                            </div>
                            <div class="mb-4 [&>span]:px-2 [&>span]:py-1 [&>span]:rounded-full [&>span]:!text-white [&>span]:font-medium [&>span]:text-[10px]">
                                <span class="bg-blue-600">{{curso.codigo}}</span>
                            </div>
                        </div>
                    <div class="flex gap-2">
                        <h2>{{curso.nome}} - ({{curso.sigla}})</h2>
                    </div>
                    <div class="mt-3">
                        <p class="text-neutral-400">{{curso.descricao}}</p>
                    </div>
                    <div class="flex gap-4 w-full">
                        <a href="{%url 'catalogo:cursos-editar' curso.id %}" class="mt-4 py-2 px-6 bg-indigo-700 text-neutral-50 rounded-sm hover:bg-indigo-500 cursor-pointer transition-all duration-300 text-lg">Editar</a>
                        <a href="{%url 'catalogo:cursos-detalhe' curso.id %}" class="mt-4 py-2 px-6 bg-indigo-700 text-neutral-50 rounded-sm hover:bg-indigo-500 cursor-pointer transition-all duration-300 text-lg">Ver</a>
                            {% if curso.ativo %}
                                <form action="{% url 'catalogo:cursos-inativar' curso.id %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="mt-4 py-2 px-6 bg-gray-700 text-neutral-50 rounded-sm hover:bg-gray-500 cursor-pointer transition-all duration-300 text-lg">Inativar</button>
                                </form>
                            {% else %}
                                <form action="{% url 'catalogo:cursos-ativar' curso.id %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="mt-4 py-2 px-6 bg-green-700 text-neutral-50 rounded-sm hover:bg-green-500 cursor-pointer transition-all duration-300 text-lg">Ativar</button>
                                </form>
                            
                            {% endif %}                    
                    </div>
                </div>
            {% endfor %}
        </div>
        <form action="" method="post" class="
        flex 
        gap-2 
        [&>button]:mt-4 
        [&>button]:py-2 
        [&>button]:px-6 
        [&>button]:cursor-pointer 
        [&>button]:transition-all 
        [&>button]:duration-300 
        [&>button]:text-lg 
        [&>button]:text-neutral-50 
        [&>button]:rounded-sm 
        [&>button]:hover:bg-neutral-500 
        [&>button]:disabled:bg-neutral-800 
        [&>button]:disabled:hover:bg-neutral-800 
        [&>button]:disabled:cursor-not-allowed
        ">
            {% if previous %} 
                <button class="bg-sky-700">Anterior</button> 
            {% else %} 
                <button disabled>Anterior</button> 
            {% endif %}

            {% if next %}
             <button class="bg-sky-700">Próximo</button>  
            {% else %}
                <button disabled>Próximo</button> 
            {% endif %}
        </form>
    </section>
{% endblock %}